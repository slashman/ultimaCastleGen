<html>
<head>
<title>Ultima Castle Generator by Slashie</title>
<script src = "generator.js"></script>
<script>
function generateMap(){
	var generator = new MapGenerator();
	var castle = generator.generateMap({royal: true, width: 32, height: 32})
	document.getElementById("mapOutput").value = JSON.stringify(castle, null, 2);
	canvasRenderer.drawSketch(castle.rooms, 'planCanvas', false);
	canvasRenderer.drawLevelWithIcons(castle.map, 'levelCanvas');
}

function imagesLoaded(){
	document.getElementById("generateButton").innerHTML = "Generate Castle";
	document.getElementById("generateButton").disabled = false;
	generateMap();
}
</script>
<style>
	body {
		background-color: black;
		text-align: center;
	}
</style>
</head>
<body>
<p><button onclick="generateMap()" id ="generateButton" disabled>Loading Images...</button></p>
<p>
<canvas id="levelCanvas" width="448" height="512"></canvas>
<canvas id="planCanvas" width="512" height="512" style = "display: none;"></canvas>
<textarea id = "mapOutput" rows="20" cols="40" style = "display: none;"></textarea>
</p>

<script>
var canvasRenderer = new CanvasRenderer({LEVEL_WIDTH: 32, LEVEL_HEIGHT: 32});
</script>
</body>
</html>